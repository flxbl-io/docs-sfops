# 3. Setting up sfops repository

Once you have forked the repository from sfops upstream (contact team for access) into a repository in your GitHub organisation, please set up the following variables and secrets.

### Variables & Secrets

To use the associated workflows, you need to set the following repository secrets and variables:

#### GitHub Authentication

##### GitHub Personal Access Token

| VARIABLE  | VARIABLE_TYPE     | VALUE_TYPE | EXAMPLE | Comments                                                             |
|-----------|-------------------|------------|---------|----------------------------------------------------------------------|
| GHA_TOKEN | REPOSITORY_SECRET | STRING     | ghp_... | The GitHub PAT created in [Prerequisites](./README.md#prerequisites) |

##### GitHub App Credentials

These credentials are from the sfops-bot [GitHub App](./github-app.md):

| VARIABLE                 | VARIABLE_TYPE         | VALUE_TYPE | EXAMPLE           | Comments                                                             |
|--------------------------|-----------------------|------------|-------------------|----------------------------------------------------------------------|
| SFOPSBOT_APP_ID          | ORGANIZATION_VARIABLE | STRING     | 1768214           | The App ID from your GitHub App settings page                        |
| SFOPSBOT_APP_PRIVATE_KEY | ORGANIZATION_SECRET   | STRING     | -----BEGIN RSA... | The entire contents of the .pem file downloaded from your GitHub App |

#### Docker Registry Configuration

##### Secrets for Pushing Your Images to Your Registry

These secrets are required to push the built Docker images to your container registry:

| VARIABLE        | VARIABLE_TYPE     | VALUE_TYPE | EXAMPLE              | Comments                                                                    |
|-----------------|-------------------|------------|----------------------|-----------------------------------------------------------------------------|
| DOCKER_USERNAME | REPOSITORY_SECRET | STRING     | username             | Username for your Docker registry (GitHub username if using ghcr.io)        |
| DOCKER_SECRET   | REPOSITORY_SECRET | STRING     | token/password       | Authentication token/password for your Docker registry                      |

{% hint style="info" %}
**For GitHub Container Registry (ghcr.io):** Use your GitHub username and reuse `GHA_TOKEN` as the password.  
**For other registries (JFrog, Docker Hub, etc.):** Use the appropriate credentials for your registry.
{% endhint %}

##### Configuration for Pulling Base Images

These settings are required to pull the base sfops images from the upstream registry:

| VARIABLE            | VARIABLE_TYPE       | VALUE_TYPE | EXAMPLE         | Comments                                                                     |
|---------------------|---------------------|------------|-----------------|------------------------------------------------------------------------------|
| BASE_REGISTRY_TOKEN | REPOSITORY_SECRET   | STRING     | token           | Token for authenticating to the base image registry (ghcr.io)                |
| BASE_REGISTRY       | REPOSITORY_VARIABLE | STRING     | source.flxbl.io | The base registry where docker images are pulled from                        |
| BASE_REPO           | REPOSITORY_VARIABLE | STRING     | flxbl           | The base repository in the registry from where the sfp images are downloaded |

To test the workflow before provisioning to your actual GitHub action repository, you need to set up the following

| VARIABLE            | VARIABLE\_TYPE        | VALUE\_TYPE  | EXAMPLE                                    | Comments                                                                                                                                  |
|---------------------|-----------------------|--------------|--------------------------------------------|-------------------------------------------------------------------------------------------------------------------------------------------|
| TEST\_ORGS          | REPOSITORY VARIABLE   | STRING ARRAY | \['flxbl']                                 | Should be the name of the environment                                                                                                     |
| REPO\_OWNER         | ENVIRONMENT\_VARIABLE | STRING       | \<your\_org\_name>                         | Name of the github organisation                                                                                                           |
| PROJECT\_REPO       | ENVIRONMENT\_VARIABLE | STRING       | sf-test-repo                               | These variables should be created within the environment variable named in TEST\_ORGS The Project where this action would be invoked from |
| SFOPS\_ACTION\_REPO | ENVIRONMENT\_VARIABLE | STRING       | sfops-gh-actions-test                      | The repository that contains the actions                                                                                                  |
| SFOPS\_IMAGE        | ENVIRONMENT\_VARIABLE | STRING       | ghcr.io/flxbl-io/\<your\_org>:development  | The image to be used along with the tag                                                                                                   |
| SFOPS\_LITE\_IMAGE  | ENVIRONMENT\_VARIABLE | STRING       | ghcr.io/\<your-org>/sfops-lite:development | The lite image to be used along with the tag                                                                                              |

To deploy the workflow to the actual org, please setup the following

| VARIABLE            | VARIABLE\_TYPE        | VALUE\_TYPE  | EXAMPLE                                | Comments                                                                                                                                  |
|---------------------|-----------------------|--------------|----------------------------------------|-------------------------------------------------------------------------------------------------------------------------------------------|
| ORGS                | REPOSITORY VARIABLE   | STRING ARRAY | \['super-org']                         | Should be the name of the environment                                                                                                     |
| REPO\_OWNER         | ENVIRONMENT\_VARIABLE | STRING       | \<your\_org\_name>                     | Name of the github organisation                                                                                                           |
| PROJECT\_REPO       | ENVIRONMENT\_VARIABLE | STRING       | sf-core                                | These variables should be created within the environment variable named in TEST\_ORGS The Project where this action would be invoked from |
| SFOPS\_ACTION\_REPO | ENVIRONMENT\_VARIABLE | STRING       | sfops-gh-actions                       | The repository that contains the actions                                                                                                  |
| SFOPS\_IMAGE        | ENVIRONMENT\_VARIABLE | STRING       | ghcr.io/\<your\_org>/sfops:latest      | The image to be used along with the tag                                                                                                   |
| SFOPS\_LITE\_IMAGE  | ENVIRONMENT\_VARIABLE | STRING       | ghcr.io/\<your\_org>/sfops-lite:latest | The lite image to be used along with the tag                                                                                              |

{% hint style="warning" %}
These variables will be automatically set up during the set up of sfops in your repository by the FLXBL team. This guide is only applicable when you are setting up a self managed instance of sfops
{% endhint %}
